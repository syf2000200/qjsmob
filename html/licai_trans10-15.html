<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
	<title>理财转让</title>
	<meta name="author" content="Hifang.com">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="apple-mobile-web-app-capable" content="yes"><!--  网站开启对 web app 程序的支持 -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black">  <!-- 指定的iphone中safari顶端的状态条的样式 -->
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-itunes-app" content="app-id=432274380" /><!--  iPhone显示下载AppStore的banner -->
    <meta http-equiv="Expires" CONTENT="-1">   <!--  网页在任何时候都不能被Cache存储        -->
    <meta http-equiv="Cache-Control" CONTENT="no-cache">           
    <meta http-equiv="Pragma" CONTENT="no-cache">  
    <link rel="stylesheet" href="../../thirdvendor/font-awesome/font-awesome.css">
    <link rel="stylesheet" type="text/css" href="../less/app.css">

    <!-- holder.js 图片站位 可去掉-->
    <script src="../../thirdvendor/holder/holder.min.js"></script>
    <style type="text/css">
        .m-custom>.layermcont{
            padding: 0 28px;
        }
        .layermbox0 .layermchild.m-custom{
            max-width: 960px;
            width: 90%;
        }
        .m-dialog>h5{
            margin-top: 29px;
            margin-bottom: 20px;
            font-size: 16px;
            line-height: 1;
            color:#333;
            text-align: center;
        }
        .m-dialog>.dialog-row{
            margin-bottom: 15px;
            font-size: 12px;
            line-height: 1;
            color: #666;
        }
        .m-dialog>.dialog-ipt{
            margin-bottom: 20px;
            text-align: center;
        }
        .m-dialog>.dialog-ipt>input{
            width: 85%;
            height: 36px;
            border: 1px solid #DDD;
            padding: 5px;
            font-size: 12px;
        }
    </style>
</head>
    
<body class="bgf0">
    <header class="header">
        <div class="h-topbox">
            <p class="h-top">立即购买</p>
            <a href="" class="h-item-left icon-angle-left"></a>
        </div>                     
    </header>
    <section class="yuePay">
        <div class="h-top-main h-col-2">
            <div class="h-top-main-money">16<em>%</em></div>
            <p>预期年化收益率</p>
            <i></i>
        </div>
        <div class="h-top-main h-col-2">
            <div class="h-top-main-money">30<em>天</em></div>
            <p>理财期限</p>
        </div>

        <div class="commont-style commont-lc kegou">
            <div class="x-contenjst-buy-detail lc-con">
                <span>可购金额：</span>
                <div><span class="rede4">100,100,100</span>元</div>
            </div>
        </div>

        <div class="commont-style commont-lc">
        	<div class="x-contenjst-buy-detail lc-con">
                <div class="x-conjsttxt"><span>购买金额:</span></div>
                <span class=" clearfix pd-0 counter">
                    <div class="grey96">可输入金额，1000元起投，1000元递增</div>
                    <button href="#" class=""  onclick="cutMinus('#Num','#Plus','#Minus');">-</button>
                    <input type="text" data-max="40000" class="num" id="Num" value="1000" onchange="modVal('#Num')">
                    <button href="#" class="plus"  onclick="addPlus('#Num','#Plus','#Minus');">+</button>
                    <div class="rede4">壹仟元整</div>
                    <div>预期收益：<span class="rede4">112.12</span>元</div>
                </span>
                
            </div>
        </div>   
        
        <div class="container">
            <input type="button" class="btn-red h-orderbtn" id="toPay" value="马上支付">
        </div> 
        <div class="lc-con"><label><input type="checkbox" value="1">我已阅读</label><a href="javascript:;" ><i class="blue5c">《理财转让及受让协议》</i></a></div>
    </section>

<!-- javascript -->
<script src="../../thirdvendor/zepto1.0/zepto.js"></script>
<script src="../../thirdvendor/zepto1.0/touch.js"></script>
<script src="../../thirdvendor/layer.m/layer.m.js"></script>
<script>

/**
 * @program: 加弹层
 * @author songshijie
 * @date 20150906
 *
 *
 * */
(function(){
    var toPay = document.querySelector('#toPay');
    if(!toPay) return;
    toPay.addEventListener('click', payDialog, false);


    function getTpl(type){
        var cls;
        type==='pc'? cls = 'pc-dialog' : cls = 'm-dialog';
        return [
            '<div class="'+cls+'">',
            '<h5>交易密码验证</h5>',
            '<div class="dialog-ipt"><input type="password" placeholder="请输入仟金所交易密码"/></div>',
            '</div>'
        ].join('');
    }

    function payDialog(){
        layer.open({
            content: getTpl(null, '5000.00', '0.00', '1000.00'),
            btn: ['确认', '取消'],
            shadeClose: false,
            className: 'm-custom',
            yes: pwdOK,
            no: pwdCancel
        });
    }
})()

/****检测按键是否为数字****/
function keyCheck(event){
    return 13 == event.keyCode || (46 == event.keyCode || (8 == event.keyCode || event.keyCode >= 96 && event.keyCode <= 105)) ? true : event.keyCode < 48 || event.keyCode > 57 ? false : true;
}

//确定回调事件
function pwdOK(){
    layer.open({content: '你点了确认', time: 1});
}
//取消回调事件
function pwdCancel(){
    layer.open({content: '你选择了取消', time: 1});
}



//计算认购金额


function addPlus(cta,plus,minus){
    var cta = $(cta),num,
        max = $(cta).attr('data-max');
        num = parseInt(cta.val());
    if(num < max){
        num = num+1000;
        cta.val(num);
        $(minus).removeAttr ("disabled");
    }else{
        $(plus).attr("disabled","disabled");
        alert('最大不能超过'+max);
    }
}

function cutMinus(cta,plus,minus){
    var cta = $(cta),num;
        num = parseInt(cta.val());
    if(num > 1000){
        num = num-1000;
        cta.val(num);
        $(plus).removeAttr ("disabled");
    }else{
        $(minus).attr("disabled","disabled");
        alert('最小不能超过1000');
    }
}

function modVal(cta){
    var cta = $(cta),num,
        reg = new RegExp(/^[0-9]*[1-9][0-9]*$/);
        num = parseInt(cta.val());
        var max = $(cta).attr('data-max');
    if(!reg.test(num)){
        cta.val('1000');
        alert("请输入数字！");
    }else if(num < max){
//  	var d=num.toString();
//  	var i = Math.pow(10,d.length-1);
//		var nums=(Math.round(d/i))*i;
//		if(nums<1000){
//			cta.val('1000');
//		}else{
//			cta.val(nums);
//		}
		var d=Math.ceil(num/1000);
		var nums=d*1000;
		cta.val(nums);
   	}else{
   		cta.val('1000');
        alert('最大不能超过'+max);
    }
}



</script>



</body>
</html>